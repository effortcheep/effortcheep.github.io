---
title: 耗电优化
date: 2020-05-28 21:30
tags:
	- iOS
---

## 少用定时器

## 优化I/O操作
+ 尽量不要频繁写入小数据，最好批量一次性写入
+ 读写大量重要数据是，考虑用dispatch_io，其提供了基于GCD的异步操作文件I/O的API。用dispatch_io系统会优化磁盘访问
+ 数据量比较大，使用数据库

## 网络优化
+ 减少、压缩网络数据
+ 如果多次请求的结果相同，尽量使用缓存
+ 使用断点续传，否则网络不稳定时可能多次传输相同的内容
+ 网络不可用是，不要尝试执行网络请求
+ 让用户可以取消长时间运行或者速度很慢的网络操作，设置合适的超时时间
+ 批量传输，比如，下载视频流时，不要传输很小的数据包，直接下载整个文件或者一块一块的下载。如果下载广告，一次性下载完成，然后慢慢展示。如果是电子邮件，一次下载多封，不要一封一封的下载

## 定位优化
+ 如果只需要快速确定用户位置，最好使用CLLocationManager的requestLocation方法。定位完成后，会自动让定位硬件断电
+ 如果不是导航应用，尽量不要使用实时更新位置，定位完毕就关闭定位服务
+ 尽量降低定位精度，尽量不要使用精度最高的kCLLocationAccuracyBest
+ 需要后台定位时，尽量设置pausesLocationUpdatesAutomtically为YES，如果用户不太可能移动的时候系统会自动暂停位置更新